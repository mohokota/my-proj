<%- include("../partials/head.ejs") %>

<body>
    <%- include("../partials/navbar.ejs") %>

    <section class="box box-coin">
        <div class="item item-coin">
            <h1> Search cryptocurrency </h1>
            <p> Enter coin id and hit enter to display the current price of your favorite coins </p> <br>
            <p class="s-text"> See full list of all supported coins here: <i><a class="link link-coin" href="https://docs.google.com/spreadsheets/d/1wTTuxXt8n9q7C4NDXqQpI3wpKu1_5bGVmP9Xz0XGSyU" target="_blank" title="List of all supported coins">coins list</a></i></p>
            <form class="" action="/coins" method="post">
                <input type="text" name="coinid" placeholder="e.g bitcoin.." id="form-input" autofocus>
            </form>

            <% if(locals.searchCoin) { %>
                <div class="price-con">
                    <div class="price-itm">
                        <img src="<%=searchCoin.image.small%>" alt="cryptocurrency"/>  
                        <p> <%=searchCoin.name%> [ <%=String(searchCoin.symbol).toUpperCase()%> ]:  </p>
                    </div>
                    <div >
                        <h3 class="l-text"> $ <%=searchCoin.market_data.current_price.usd%> </h3>
                    </div>
                </div>
            <% } %>  
        </div>
    </section>

    <div class="box">
        <p>Top 7 trending cryptocurrencies on CoinGecko </p>
        <p>sorted by coins that are most searched for in the last 3 hrs.</p>
    </div>

    <section class="box">
        <% if(locals.topCoins) { %>
            <% topCoins.forEach( trending => { %>
            <div class="show-coin">
                <img src="<%=trending.item.small%>" alt="top 7 cryptocurrency"/>  
                <span> <%=trending.item.name%> [ <%=trending.item.symbol%> ]: rank# <%= trending.item.market_cap_rank%> </span>
            </div>
            <% }) %>
        <% } %>  
    </section>
    
    <div class="box">
        <p class="s-text">Public API has a rate limit of 30 calls/minute
            <span class="s-text">(Data fetched from: 
                <a class="link link-coin" href="https://www.coingecko.com/" target="_blank" title="CoinGecko">CoinGecko)</a> 
            </sapn>
        </p>
    </div>
    

</body>
</html>

